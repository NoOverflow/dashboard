@page "/dashboard"
@using Dashboard.Models
@using Dashboard.Services
@using Dashboard.Shared.Widgets;
@inject SpotifyService Spotify
@inject SessionState SessionState
@inject AuthenticationStateProvider AuthStateProvider

<PageTitle>Panel</PageTitle>

<AuthorizeView>
    <Authorized>
        <img id="logo" src="res/logo.svg" />
        <div id="background-ellipses">
            <img id="e1" draggable="false" src="res/ellipses/e1.svg" />
            <img id="e2" draggable="false" src="res/ellipses/e2.svg" />
            <img id="e3" draggable="false" src="res/ellipses/e3.svg" />
            <img id="e4" draggable="false" src="res/ellipses/e4.svg" />
            <img id="e5" draggable="false" src="res/ellipses/e5.svg" />
            <img id="e6" draggable="false" src="res/ellipses/e6.svg" />
            <img id="e7" draggable="false" src="res/ellipses/e7.svg" />
        </div>

        <div id="widgets">
            <WidgetsContainer StyleId="top-widgets">
                <WidgetContainer Id="0" Style="top" Widget="@(new Dashboard.Models.Widget(typeof(SpotifyWidget).AssemblyQualifiedName!))" />
                <WidgetContainer Id="1" Style="top" Widget="@(new Dashboard.Models.Widget(typeof(ExampleWidget).AssemblyQualifiedName!))" />
                <WidgetContainer Id="2" Style="top" Widget="@(new Dashboard.Models.Widget(typeof(ExampleWidget).AssemblyQualifiedName!))" />
            </WidgetsContainer>

            <WidgetsContainer StyleId="middle-widgets">
                <WidgetContainer Id="0" Style="middle-one" Widget="@(new Dashboard.Models.Widget(typeof(ExampleWidget).AssemblyQualifiedName!))" />
                <WidgetContainer Id="1" Style="middle-two" Widget="@(new Dashboard.Models.Widget(typeof(WeatherWidget).AssemblyQualifiedName!))" />
                <WidgetContainer Id="2" Style="middle-three" Widget="@(new Dashboard.Models.Widget(typeof(ExampleWidget).AssemblyQualifiedName!))" />
            </WidgetsContainer>

            <WidgetsContainer StyleId="bottom-widgets">
                <WidgetContainer Id="0" Style="bottom-one" Widget="@(new Dashboard.Models.Widget(typeof(NewsWidget).AssemblyQualifiedName!))" />
                <WidgetContainer Id="1" Style="bottom-two" Widget="@(new Dashboard.Models.Widget(typeof(ExampleWidget).AssemblyQualifiedName!))" />
                <WidgetContainer Id="2" Style="bottom-three" Widget="@(new Dashboard.Models.Widget(typeof(ExampleWidget).AssemblyQualifiedName!))" />
            </WidgetsContainer>
        </div>

        @if (ShowMenu)
        {
            <ServicesMenu />
        }

        <img id="services-menu" @onclick="@OnOpenServicesMenuButtonClicked" src="res/three_dots.svg" width="7" height="29" />
    </Authorized>
    <NotAuthorized>
        <p>You cannot access this page as you're not authenticated.</p>
    </NotAuthorized>
</AuthorizeView>

@code {
    bool ShowMenu = false;
    
    void OnOpenServicesMenuButtonClicked()
    {
        ShowMenu = !ShowMenu;   
    }
}
